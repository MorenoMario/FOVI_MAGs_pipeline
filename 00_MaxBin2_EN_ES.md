# MaxBin2 Binning Workflow

This document describes how to run **MaxBin2** on co-assembled metagenomes for groups Y and H.

---

## üìå Requirements
- [MaxBin2](https://sourceforge.net/projects/maxbin2/) (`run_MaxBin.pl`)
- BAM files mapped to contigs
- Depth tables generated by `jgi_summarize_bam_contig_depths`

---

## üõ†Ô∏è Steps

### 1. Generate depth files
```bash
#!/bin/bash
INPUT_DIR="/datos1/mmorenos/fovi_data/03_bowtie/Y"

for bam_file in $INPUT_DIR/*-sort.bam; do
  base_name=$(basename "$bam_file" -sort.bam)
  output_depth="${base_name}_depth.txt"
  jgi_summarize_bam_contig_depths --outputDepth "$output_depth"     --minContigLength 1000 --minContigDepth 2 --noIntraDepthVariance "$bam_file"
done
```

### 2. Run MaxBin2 for Y
```bash
/media/disk01/software/MaxBin-2.2.7/run_MaxBin.pl   -prob_threshold 0.9 -verbose -min_contig_length 1500 -thread 60   -contig /datos1/mmorenos/fovi_data/02_spades_ass/spades_Y_coassembly/contigs.fasta   -abund_list list_depth_Y.txt   -out maxbin_Y_m1500

# Repeat for -m 2000 and -m 2500
```

### 3. Run MaxBin2 for H
```bash
/media/disk01/software/MaxBin-2.2.7/run_MaxBin.pl   -prob_threshold 0.9 -verbose -min_contig_length 1500 -thread 60   -contig /datos1/mmorenos/fovi_data/02_spades_ass/spades_H_coassembly/contigs.fasta   -abund_list list_depth_H.txt   -out maxbin_H_m1500
```

---

## üìÇ Output
- One directory per minimum contig length (`*_m1500`, `*_m2000`, `*_m2500`)
- FASTA files per bin (e.g., `maxbin.001.fasta`)
- Log files with binning statistics

---

# üìù Flujo de trabajo con MaxBin2

Este documento describe c√≥mo ejecutar **MaxBin2** sobre los metagenomas co-ensamblados para los grupos Y y H.

---

## üìå Requerimientos
- [MaxBin2](https://sourceforge.net/projects/maxbin2/) (`run_MaxBin.pl`)
- Archivos BAM mapeados a contigs
- Tablas de profundidad generadas con `jgi_summarize_bam_contig_depths`

---

## üõ†Ô∏è Pasos

### 1. Generar archivos de profundidad
```bash
#!/bin/bash
INPUT_DIR="/datos1/mmorenos/fovi_data/03_bowtie/H"

for bam_file in $INPUT_DIR/*-sort.bam; do
  base_name=$(basename "$bam_file" -sort.bam)
  output_depth="${base_name}_depth.txt"
  jgi_summarize_bam_contig_depths --outputDepth "$output_depth"     --minContigLength 1000 --minContigDepth 2 --noIntraDepthVariance "$bam_file"
done
```

### 2. Ejecutar MaxBin2 para Y
```bash
/media/disk01/software/MaxBin-2.2.7/run_MaxBin.pl   -prob_threshold 0.9 -verbose -min_contig_length 1500 -thread 60   -contig /datos1/mmorenos/fovi_data/02_spades_ass/spades_Y_coassembly/contigs.fasta   -abund_list list_depth_Y.txt   -out maxbin_Y_m1500
```

### 3. Ejecutar MaxBin2 para H
```bash
/media/disk01/software/MaxBin-2.2.7/run_MaxBin.pl   -prob_threshold 0.9 -verbose -min_contig_length 1500 -thread 60   -contig /datos1/mmorenos/fovi_data/02_spades_ass/spades_H_coassembly/contigs.fasta   -abund_list list_depth_H.txt   -out maxbin_H_m1500
```

---

## üìÇ Salida
- Un directorio por longitud m√≠nima de contig (`*_m1500`, `*_m2000`, `*_m2500`)
- Archivos FASTA por bin (ej. `maxbin.001.fasta`)
- Archivos de log con estad√≠sticas de binning
